<!DOCTYPE html>
<meta charset="utf8">
<html>
    <head>
        <link rel="stylesheet" href="node.css">
        <script src="twgl-full.min.js"></script>
        <script src="node.js"></script>
        <script id="vertex" type="glsl">
            attribute vec4 position;   

            uniform mat4 matrix;
            uniform mat4 textureMatrix;

            varying vec2 texcoord;

            void main () {
                gl_Position = matrix * position;
                
                texcoord = (textureMatrix * position).xy;
            }
        </script>
        <script id="fragment" type="glsl">
            precision mediump float;

            varying vec2 texcoord;
            uniform sampler2D texture;
            uniform vec4 aspectColor;
            
            void main() {
                if (texcoord.x < 0.0 || texcoord.x > 1.0 ||
                    texcoord.y < 0.0 || texcoord.y > 1.0) {
                discard;
                }
                gl_FragColor = texture2D(texture, texcoord) * aspectColor;
                if (gl_FragColor.a < 0.003921569) {
                discard;
                }
            }
        </script>
    </head>
    <body>
        <canvas id="node-canvas" width="640" height="480"></canvas>
        <div id="aspects">
        </div>
        <button id="btn-add-aspect">Add Aspect</button>
    </body>
</html>